<html>
<head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/0.4.0/aframe.js"></script>
	<script src="https://rawgit.com/donmccurdy/aframe-obj-loader-component/master/dist/aframe-obj-loader-component.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="pace.min.js" data-pace-options='{"maxProgressPerFrame":5}'></script>
	<link rel="stylesheet" href="style.css"></link>
	<script>
	$(document).ready(function(){
		var models = document.querySelectorAll('a-collada-model');
		var promiseArray = [];
		models.forEach(function(index){
			var promise = new Promise((resolve,reject)=>{
				this.addEventListener('loaded',function(event){
					resolve();
				});	
			});
			promiseArray.push(promise);
		});
		console.log(promiseArray);

		Promise.all(promiseArray).then((resolution)=>{
			console.log('finished loadin.');
		});
	});
	</script>
</head>
<body>
	<a-scene>
		<a-assets>
			<a-asset-item id="Bed" src="assets/GameVR_BedOnly.dae">
			<a-asset-item id="SideTable" src="assets/GameVR_SideTableOnly.dae">	
			<a-asset-item id="TV" src="assets/GameVR_TVUnit_StandardMaterialConvertered.dae">
			<a-asset-item id="Walls" src="assets/GameVR_WallsOnly.dae">
		</a-assets>
		<a-collada-model id="BedCollada" src="#Bed"></a-collada-model>
		<a-collada-model id="SideTableCollada" src="#SideTable"></a-collada-model>
		<a-collada-model id="TVCollada" src="#TV"></a-collada-model>
		<a-collada-model id="WallsCollada" src="#Walls"></a-collada-model>
        <!-- <a-entity obj-loader="src: url(./assets/GameVR_T1.obj);
                              mtl: url(./assets/gamevr_t1.mtl);">
        </a-entity> -->
		<a-entity id="cameraWrapper" position="0 1 8">
			<a-entity id="camera" camera look-controls wasd-controls position="2.67 0.0 -9.81" rotation="-3.76 26.02 0.0">
				<a-entity id="cursor" position="0 0 -2"
				    geometry="primitive: ring; radiusOuter: 0.016; radiusInner: 0.01"
				    material="color: #ff9; shader: flat; transparent: true; opacity: 0.5"
				    scale="2 2 2" raycaster>
				</a-entity>
			</a-entity>
		</a-entity>
		<a-sky src="assets/sky.jpg"></a-sky>
	</a-scene>
</body>
</html>
